writer = [[
	после аутро 1 часа	Оливия в ярости и не знала про свою каменную копию. И теперь одна из них пострадала.	Olivia is enraged - she didn't know about a stone copy of herself. Now one of them suffered.
	после ДГ Тристан 2	Нужно добраться до мастерской Тристана и помочь ему.	I should get to Tristan's workshop and help him.
	после ДГ Оливия 1	По словам Оливии, статуя мужчины с красными глазами напоминает Эрика. Но куда они могли скрыться?	According to Olivia, the male red-eyed statue looks like Eric. But where could they escape?
	после ДГ Статуя Оливии 1	Теперь я не один. Статуя Оливии поможет мне преодолеть различные трудности со злыми животными.	I'm not alone now. Olivia's statue will help me handle evil animals.
АЗ К мастерской	-Карта_леса	В незнакомом лесу легко заблудиться без карты.	It's very easy to get lost in the forest without a map.
У мастерской
	после АНИМ Сломанный мост	Эта девчонка не даёт мне покоя и постоянно мешает расследованию.	That girl won't leave me alone, and she always interferes with my investigation.
	клик на флаг со знаком статуй	Вот и мастерская Тристана. Остаётся попасть внутрь и найти нужное для починки статуи Оливии.	Here's Tristan's workshop. Now I just need to get in and find things to fix Olivia's statue.
	клик на название музея	Вредная девчонка может привести меня к остальным злым статуям. Нужно только осторожно идти по её следу.	That annoying girl might bring to other evil statues. I should just follow her carefully.
ЗЗ Вход в мастерскую	need Половина_ключа_1,2	Остаётся попасть в мастерскую, и тогда я смогу помочь Тристану починить статую.	Now I'll get in the workshop, and then I'll be able to help Tristan fix the statue.
ЗЗ Вагонетка	need Топор	Бревно слишком больше, придётся порубить его на части.	The log is too big - I'll have to cut it to pieces.
	need Паровоз	Похоже на какой-то тайник. Что здесь могли спрятать?	This looks like a stash. What could be hidden here?
	need Кожаная_перчатка	Эта жидкость может быть ядовита, я не рискну трогать её голыми руками.	This liquid might be poisonous - I won't risk touching it with bare hands.
ЗЗ Сломанный мост	need Доски	Чтобы добраться до мастерской Тристана, нужно починить мостик.	I should fix the bridge to get to Tristan's workshop.
ЗЗ Ручей	need Багор	Снова глубокий ручей, но я знаю, как достать топор со дна.	A deep brook again, but I know how to get the axe out of the water.
	need Пустая_лейка	Здесь я смогу набрать воды, если она мне пригодится.	I'll be able to take water here if I need it.
ЗЗ В палисадник	need Семена	Чтобы достать ключик, придётся задобрить птичку чем-то съедобным.	I'll have to give the birdie a treat if I want to take the key.
	need Ромашка	Если открою калитку, у меня появится возможность догнать вредную девчонку.	If I open the gate, I'll be able to catch up with the mean girl.
	need Роза	Если открою калитку, у меня появится возможность догнать вредную девчонку.	If I open the gate, I'll be able to catch up with the mean girl.
	need Тюльпан	Если открою калитку, у меня появится возможность догнать вредную девчонку.	If I open the gate, I'll be able to catch up with the mean girl.
Мастерская Тристана
	первое появление на локации	Вот это да! Настоящая мастерская скульптора! Нужно хорошенько осмотреться, чтобы найти то, что нужно для починки статуи.	Whoa! A real sculptor's workshop! I need to look around to find something to fix the statue.
ЗЗ Кувшины	need Стамеска	Глина засохла, нужно чем-нибудь отскоблить, чтобы достать нужное.	The clay is dried out - I'll scrape it off and get what I need.
	need Цепочка	Здесь я смогу достать тонким длинным предметом.	Something long and narrow will do the trick here.
ЗЗ Рабочий шкаф	need Заколка	Можно воспользоваться какой-нибудь отмычкой.	I could use a lockpick.
	клик на записку в шкафу	Тристан пользуется популярностью среди скульпторов.	Tristan is famous amongst sculptors.
	need Деревянная_ручка	Ох, сломалась! Придётся найти для неё замену.	It broke! I'll have to find a replacement.
	need Кусок_рамы	Рука под шкаф не пролезет, придётся зацепить чем-то плоским.	My hand won't squeeze in there - I'll have to use something flat.
ЗЗ Щит	need Фигурка_рыцаря	Похоже, раньше щит украшали два рыцаря.	Looks like the shield used to be decorated with two knights.
	need Часть_узора_1,2	Напоминает какой-то механизм, и он заработает, если найти части узора.	This must be some sort of mechanism. It'll work if I find the pattern parts.
ЗЗ Картина	need Крестовая_отвёртка	Часть рамы можно использовать как длинный тонкий предмет.	I could use the frame part as something long and flat.
	need Стрела	За холстом однозначно что-то есть. Придётся слегка повредить его.	There must be something behind the canvas. I guess I'll have to damage it.
Палисадник
	после АНИМ Поджог	Девчонка знает, как помешать мне продвинуться в расследовании.	The girl knows how to meddle with my investigation.
	ббт на музей	Я не верном пути, нужно только пробраться через огонь.	I'm on the right way, I just need to get through the fire.
АЗ Огонь	need Покрывало	Нужно потушить огонь, пока он не задел домик.	I should put out the fire before it comes close to the house.
ЗЗ Домик сторожа	need Голова_гнома	Здесь не хватает маленького садового охранника.	A little garden guard is missing here.
	need Ключ_сторожа	Наверняка, в домике сторожа я смогу найти какие-нибудь садовые принадлежности.	There must be garden equipment in the watchman's cabin.
ЗЗ Садовый шкафчик	need Кожаная_перчатка	Давненько сюда не заглядывали!	No one has been here for ages!
	ббт на неправильное применение платка	Платок слишком легкий, нужно попробовать чем-нибудь другим.	The handkerchief is too light - I should try something else.
	need Ручка_шкафчика	Возможно, здесь я найду то, чем можно будет потушить огонь.	I think I can find something to put out the fire.
ЗЗ Клумба	need Бутылка_с_кислотой	Растения выглядят ядовитыми, нельзя, чтобы их яд попал на руки. Лучше будет не позволить им расти дальше.	The plants look poisonous - the poison mustn't land on the hands. It would help to stop them from growing.
	need Секатор	Мешок не достать, но я могу его разрезать.	I can't reach the bag, but I can cut it through.
	клик на записку на клумбе	Пока я не остановлю вредную девчонку, она так и будет мешать мне расследованию.	That girl will interfere with me unless I stop her.
У музея
	после АНИМ Охрана	Очевидно, собака очень зла, и Эрик дал ей команду никого не пускать в музей.	Obviously, the dog is very angry - Eric ordered him not to let anyone into the museum.
АЗ Злая собака	need Статуя Оливии	Способность Статуи Оливии может помочь мне избавиться от злого животного, чтобы пробраться в музей.	The ability of Olivia's statue might help me get rid of the evil animal and sneak into the museum.
	после анимации как у собаки становятся зеленые глаза	Теперь собака не рычит и совсем не выглядит злой... Я думаю, мне удастся зайти внутрь.	Now that the dog isn't growling he doesn't look that sinister... I think I'll be able to get inside.
ЗЗ Фонтан	need Напильник	Нужно спилить, я знаю, куда фигурка может пригодиться.	I should cut it off. I know where this figurines could fit.
	need Диск_1,2 (каменный на колонне)	Похоже, здесь должен присутствовать какой-то рисунок.	Looks like a painting is missing here.
ЗЗ Скелет динозавра	need Щипцы	Зубы динозавра сжимаются слишком крепко, мне не хватит сил достать руками.	The dinosaur's teeth are clenched too tight - I'm not strong enough to take this with my hands.
	need Кость	Голова динозавра сильно накренилась, и там что-то забилось. Но я знаю, как это поправить.	The dinosaur's head is bent too much - something is stuck in there. But I know how to fix it.
ЗЗ Касса	need Фигурка_орла	Подозреваю, здесь может находиться что-то важное.	I have a feeling there might be something valuable here.
	need Стеклорез	Окошко кассы закрыто изнутри. Нужно убрать стекло, чтобы достать нужное.	The box office is locked from inside. I should remove the glass to get what I need.
	клик на записку в кассе	Я так и думала, что вредная девчонка следует указаниям Эрика. Теперь я знаю, что её зовут Майя.	Just as I thought - the girl follows Eric's instructions. Now I know her name, Maya.
АЗ За музей	need Статуя Оливии с бубенцами	Мне туда идти нельзя, меня могут заметить с заднего входа.	I can't go there - someone can notice me from the back entrance.
	после АНИМ Статуя Оливии уходит	Теперь Статуя Оливии отвлечет злых статуй, и я смогу добраться до Тристана и поговорить с ним.	Once Olivia's copy distracts the evil statues, I'll be able to get to Tristan and talk to him.
Большой зал
	первое появление на локации	В этом зале никого нет, я смогу хорошенько осмотреться и узнать, где скрываются статуи. Возможно, мне удастся найти Тристана.	There's no one in this hall, so I can look around and find out where the statues are hiding. Perhaps, I'll be able to track down Tristan.
ЗЗ В малый зал	need Фигурка_ангела_1,2	До этого тайник украшали два небольших ангелочка. Если я их найду, то узнаю, что хранится внутри.	This stash used to be decorated with two little angels. I'll see what's inside after I find them.
	need Шифр	Если найду шифр, то я смогу пробраться в зал, где находится Тристан.	If I find the code, I'll be able to get into the hall where Tristan was.
	need Лупа	Код написан очень мелко, я не смогу разглядеть без нужного инструмента.	The code is so small! I can't make it out without the tool.
	когда игрок хочет зайти на локацию smallhall, типо нельзя зайти, ибо статуи заметят	Перед тем, как войти в зал, нужно отвлечь злых статуй с заднего входа. Статуя Оливии может мне в этом помочь.	Before entering the hall, I should distract the evil statues' attention from the back door. Olivia's statue can help me.
ЗЗ Холст	need Секатор	Из-за этого холста я смогу подглядеть, что находится в соседнем зале, нужно только разрезать его.	If I cut this canvas, I'll be able to peek what's in the next hall. I just need to cut it through.
	после ВИД Подглядывание	Теперь ясно, почему злые статуи злятся на Тристана.	Now I see why the evil statues are angry with Tristan.
	клик на решетку после закрытия ЗЗ и просмотра ВИД Подглядывание	Если часто туда заглядывать, меня могут заметить, нужно быть осторожной.	I should be more careful - if I peek there too often, they might notice me.
	после ДГ Статуя Оливии 2	Отличная идея, нужно найти подходящий музыкальный инструмент для Оливии.	Brilliant idea! I should find a proper musical instrument for Olivia.
ЗЗ Тент	need Секатор	Тент снять не получится, но я смогу его разрезать.	I won't be able to remove the tent, but I can cut it.
ЗЗ Абориген	need Кольцо_аборигена	Очевидно, ему не хватает одного кольца.	He's obviously missing a ring.
	need Брошь	Я знаю, каким предметом это можно открыть.	I know what opens this.
Малый зал
	после АНИМ Отвлечение	У меня есть немного времени, чтобы освободить Тристана и поговорить с ним.	I have some time to release Tristan and talk to him.
	после ДГ Тристан 3	Теперь я знаю, что нужно опасаться статуй с красными глазами, а зеленоглазым можно доверять. У Тристана в кармане лежит что-то нужное для меня.	Now I know I should be avoid red-eyed statues and I can trust green-eyed ones. There's something that I need in Tristan's pocket.
	после ВИД Угроза	На этот раз Тристану угрожает ещё бОльшая опасность. Мне нужно поспешить, чтобы не допустить худшего.	This time Tristan faces a greater danger. I should hurry, or something bad might happen.
ЗЗ Витрины	need Заклёпка_от_витрины	Открыть витрину без недостающей заклёпки не получится.	I won't be able to open the show case without the missing clasp.
	need Жук	Одного жука украли, кто бы это мог сделать? 	One bug is stolen. Who could do it?
ЗЗ Витраж	need Щипцы	Что-то застряло за фреской, нужно вытащить.	Something is stuck behind the fresco painting. I should pull it out.
	need Кусок_витража_3/3	Эта фреска что-то скрывает, придётся найти недостающие части.	This fresco painting is hiding something. I'll have to find the missing parts.
ЗЗ Макет Совы	need Клюв	Из-под крыла совы что-то выпирает, нужно найти недостающую часть, чтобы достать.	Something stick out of the owl wing. I should find the missing part to pull it out.
	need Глаз_совы	Из-под крыла совы что-то выпирает, нужно найти недостающую часть, чтобы достать.	Something stick out of the owl wing. I should find the missing part to pull it out.

ИП Закрытая_бутылка	need Платок_Тристана	Если протереть бутылку, то увижу, что в ней содержится.	If I rub the bottle, I'll see what's inside.
ИП Портфель_Тристана	need Изумрудная_застёжка	Портфель Тристана поможет мне открыть глаза на некоторые загадки. Нужно только найти отсутствующие застёжки.	Tristan's briefcase could unveil some secrets. I just need to find the missing clasps.
	need Янтарная_застёжка	Портфель Тристана поможет мне открыть глаза на некоторые загадки. Нужно только найти отсутствующие застёжки.	Tristan's briefcase could unveil some secrets. I just need to find the missing clasps.
	need Рубиновая_застёжка	Портфель Тристана поможет мне открыть глаза на некоторые загадки. Нужно только найти отсутствующие застёжки.	Tristan's briefcase could unveil some secrets. I just need to find the missing clasps.
	клик на записку Тристана	Теперь я знаю, что Тристан не догадывался, какие последствия может принести оживление статуй.	Now I know Tristan never thought what statue animation might lead to.
ИП Сломанный_секатор	need Часть_секатора	Если найти часть секатора, но он может очень пригодиться мне в поисках.	If I find the pruners part, it will come in handy in my search.
	need Пружина_секатора	Две части секатора нужно соединить пружиной, чтобы он стал рабочим.	The pruners will work if I join the two parts with a spring.
ИП Бубенцы_без_колокольчиков	need Колокольчики	Понадобится найти что-нибудь звенящее, чтобы с помощью громкого звука отвлечь статуй.	I'll have to find something noisy to distract the statues with a loud noise.
	need Статуя_Оливии	Статуя Оливии мне поможет отвлечь злых статуй.	Olivia's statue will help me distract the evil statues.
ИП Футляр_Тристана	need Вензель_T	Похоже на инициалы скульптора.	This looks like the sculptor's monogram.
	need Виньетка_Тристана	Догадываюсь, чьи портреты тут должны находиться.	I think I know whose portraits should fit here.
	need Виньетка_Оливии	Догадываюсь, чьи портреты тут должны находиться.	I think I know whose portraits should fit here.
]]

strings = [[
bbt_need_oliviastatuewithbells	DUMMY need oliviastatuewithbells	применяем Статуя Оливии с бубенцами	rm_atmuseum
bbt_need_oliviastatue_atmuseum	DUMMY need oliviastatue_atmuseum	применяем Статуя Оливии	rm_atmuseum
bbt_need_eaglefigurine	DUMMY need eaglefigurine	применяем Фигурка_орла	rm_atmuseum >> zz_cashbox
bbt_need_glasscutter	DUMMY need glasscutter	применяем Стеклорез	rm_atmuseum >> zz_cashbox
bbt_need_forceps_dinoskeleton	DUMMY need forceps_dinoskeleton	применяем Щипцы	rm_atmuseum >> zz_dinoskeleton
bbt_need_bone	DUMMY need bone	применяем Кость	rm_atmuseum >> zz_dinoskeleton
bbt_need_file	DUMMY need file	применяем Напильник	rm_atmuseum >> zz_fountain
bbt_need_disk1	DUMMY need disk1	применяем Диск_1	rm_atmuseum >> zz_fountain
bbt_need_disk2	DUMMY need disk2	применяем Диск_2	rm_atmuseum >> zz_fountain
bbt_need_planks	DUMMY need planks	применяем Доски	rm_atworkshop >> zz_brokenbridge
bbt_need_boathook	DUMMY need boathook	применяем Багор	rm_atworkshop >> zz_stream
bbt_need_emptycan	DUMMY need emptycan	применяем Пустая_лейка	rm_atworkshop >> zz_stream
bbt_need_seeds	DUMMY need seeds	применяем Семена	rm_atworkshop >> zz_tofrontgarden
bbt_need_camomile	DUMMY need camomile	применяем Ромашка	rm_atworkshop >> zz_tofrontgarden
bbt_need_rose	DUMMY need rose	применяем Роза	rm_atworkshop >> zz_tofrontgarden
bbt_need_tulip	DUMMY need tulip	применяем Тюльпан	rm_atworkshop >> zz_tofrontgarden
bbt_need_axe	DUMMY need axe	применяем Топор	rm_atworkshop >> zz_tram
bbt_need_locomotive	DUMMY need locomotive	применяем Паровоз	rm_atworkshop >> zz_tram
bbt_need_leatherglove	DUMMY need leatherglove	применяем Кожаная_перчатка	rm_atworkshop >> zz_tram
bbt_need_keyhalf1	DUMMY need keyhalf1	применяем Половина_ключа_1	rm_atworkshop >> zz_workshopenter
bbt_need_keyhalf2	DUMMY need keyhalf2	применяем Половина_ключа_2	rm_atworkshop >> zz_workshopenter
bbt_need_fullcan	DUMMY need fullcan	применяем Лейка_с_водой	rm_frontgarden
bbt_need_bottleofacid	DUMMY need bottleofacid	применяем Бутылка_с_кислотой	rm_frontgarden >> zz_flowerbed
bbt_need_pruner_flowerbed	DUMMY need pruner_flowerbed	применяем Секатор	rm_frontgarden >> zz_flowerbed
bbt_need_tristancloset_gardenlocker	DUMMY need tristancloset_gardenlocker	применяем Шарф_Тристана	rm_frontgarden >> zz_gardenlocker
bbt_need_cabinethandle	DUMMY need cabinethandle	применяем Ручка_шкафчика	rm_frontgarden >> zz_gardenlocker
bbt_need_gardengnome	DUMMY need gardengnome	применяем Садовый_гном	rm_frontgarden >> zz_guardhouse
bbt_need_guardkey	DUMMY need guardkey	применяем Ключ_сторожа	rm_frontgarden >> zz_guardhouse
bbt_need_localring	DUMMY need localring	применяем Кольцо_аборигена	rm_grandhall >> zz_aborigine
bbt_need_brooch	DUMMY need brooch	применяем Брошь	rm_grandhall >> zz_aborigine
bbt_need_pruner_awning	DUMMY need pruner_awning	применяем Секатор	rm_grandhall >> zz_awning
bbt_need_pruner_canvas	DUMMY need pruner_canvas	применяем Секатор	rm_grandhall >> zz_canvas
bbt_need_angelfigurine1	DUMMY need angelfigurine1	применяем Фигурка_ангела_1	rm_grandhall >> zz_tosmallhall
bbt_need_angelfigurine2	DUMMY need angelfigurine2	применяем Фигурка_ангела_2	rm_grandhall >> zz_tosmallhall
bbt_need_cypher	DUMMY need cypher	применяем Шифр	rm_grandhall >> zz_tosmallhall
bbt_need_loupe	DUMMY need loupe	применяем Лупа	rm_grandhall >> zz_tosmallhall
bbt_need_oliviascetch	DUMMY need oliviascetch	применяем Эскиз_Оливии_1	rm_inmill >> zz_oliviastatue
bbt_need_oliviascetch2	DUMMY need oliviascetch2	применяем Эскиз_Оливии_2	rm_inmill >> zz_oliviastatue
bbt_need_beak	DUMMY need beak	применяем Клюв	rm_smallhall >> zz_owllayout
bbt_need_owleye	DUMMY need owleye	применяем Глаз_совы	rm_smallhall >> zz_owllayout
bbt_need_shopwindowclasp	DUMMY need shopwindowclasp	применяем Заклёпка_от_витрины	rm_smallhall >> zz_showcases
bbt_need_beetle	DUMMY need beetle	применяем Жук	rm_smallhall >> zz_showcases
bbt_need_forceps_stainedglass	DUMMY need forceps_stainedglass	применяем Щипцы	rm_smallhall >> zz_stainedglass
bbt_need_stainedglasspiece	DUMMY need stainedglasspiece	применяем Кусок_витража_3/3	rm_smallhall >> zz_stainedglass
bbt_need_chisel	DUMMY need chisel	применяем Стамеска	rm_tristanworkshop >> zz_jugs
bbt_need_chain	DUMMY need chain	применяем Цепочка	rm_tristanworkshop >> zz_jugs
bbt_need_crossscrewdriver	DUMMY need crossscrewdriver	применяем Крестовая_отвёртка	rm_tristanworkshop >> zz_picture
bbt_need_arrow	DUMMY need arrow	применяем Стрела	rm_tristanworkshop >> zz_picture
bbt_need_knightfigurine	DUMMY need knightfigurine	применяем Фигурка_рыцаря	rm_tristanworkshop >> zz_shield
bbt_need_patternpart1	DUMMY need patternpart1	применяем Часть_узора_1	rm_tristanworkshop >> zz_shield
bbt_need_patternpart2	DUMMY need patternpart2	применяем Часть_узора_2	rm_tristanworkshop >> zz_shield
bbt_need_clasppin	DUMMY need clasppin	применяем Заколка	rm_tristanworkshop >> zz_workcabinet
bbt_need_woodenhandle	DUMMY need woodenhandle	применяем Деревянная_ручка	rm_tristanworkshop >> zz_workcabinet
bbt_need_framepiece	DUMMY need framepiece	применяем Кусок_рамы	rm_tristanworkshop >> zz_workcabinet
bbt_need_forestmap	It's easy to get lost in the forest without a map.	применяем Карта_леса	rm_watermill
bbt_need_bells	DUMMY need bells	применяем Колокольчики	inv_brokenbells
bbt_need_oliviastatue_brokenbells	DUMMY need oliviastatue_brokenbells	применяем Статуя Оливии	inv_brokenbells
bbt_need_springpruner	DUMMY need springpruner	применяем Пружина_секатора	inv_brokenpruner
bbt_need_prunerpart	DUMMY need prunerpart	применяем Часть_секатора	inv_brokenpruner
bbt_need_tristancloset_closedbottle	DUMMY need tristancloset_closedbottle	применяем Шарф_Тристана	inv_closedbottle
bbt_need_corkscrew_closedbottle	DUMMY need corkscrew_closedbottle	применяем Штопор	inv_closedbottle
bbt_need_oliviavignette	DUMMY need oliviavignette	применяем Виньетка_Оливии	inv_tristanbox
bbt_need_monogramt	DUMMY need monogramt	применяем Вензель_Т	inv_tristanbox
bbt_need_tristanvignette	DUMMY need tristanvignette	применяем Виньетка_Тристана	inv_tristanbox
bbt_need_emeraldclasp	DUMMY need emeraldclasp	применяем Изумрудная_застёжка	inv_tristancase
bbt_need_emberclasp	DUMMY need emberclasp	применяем Янтарная_застёжка	inv_tristancase
bbt_need_rubyclasp	DUMMY need rubyclasp	применяем Рубиновая_застёжка	inv_tristancase
]]




function trim (s)
	return (string.gsub(s, "^%s*(.-)%s*$", "%1"))
end

	strings = strings:gsub( "||OK||", "" )
	strings = strings:gsub( "||NULL||", "" )
	strings = strings:gsub( "||NOT FINDED||", "" )
	strings = strings:gsub( "||FINDED COUNT *2*||", "" )
	strings = strings:gsub( "||FINDED COUNT *3*||", "" )
	strings = strings:gsub( "||FINDED COUNT *4*||", "" )
	strings = strings:gsub( "||FINDED COUNT *5*||", "" )
	strings = trim( strings )

function get_string_massive( stringfull )
	local fbuf = {}
	local count = 0;
	while stringfull:find( "\n" ) do
		count = count + 1;
		local lbuf = stringfull:sub(1,stringfull:find("\n")-1)
		stringfull = stringfull:sub(stringfull:find("\n")+1)
		fbuf[ count ] = lbuf;

	end;

	return fbuf;
end;

function get_string_massive_tabs( string_massive )
	local m = string_massive
	local answer = {};
	for i = 1, #m do
		local m_buf = {}
		local s = m[ i ]
		local buf
		while s:find( "\t" ) do
			local pos = s:find( "\t" );
			buf = s:sub( 1, pos - 1 )
			table.insert( m_buf, buf )
			s = s:sub( pos + 1 )
		end
		if s:len() > 0 then
			table.insert( m_buf,  s )
		end
		--local s = ""
		--for j = 1, #m_buf do
		--	s = s..m_buf[ j ].."\t"
		--end
		--print( s )
		table.insert( answer, m_buf )
	end
	return answer;
end;

function show_string_massive_tabs( string_massive_tabs )
	local m = string_massive_tabs
	for i = 1, #m do
		local s = ""
		for j = 1, #m[ i ] do
			--print(m[ i ][ j ])
			s = s..tostring(m[ i ][ j ])..( j == #m[ i ] and "" or "\t" )
		end
		print( s )
	end
end;

function compareWordPrepare( word )

	for i = 1, #word do
		if word:sub( i, i ) == "-" then
			local a = word:sub( 1, i - 1 )
			local b = word:sub( i + 1 )
			word =  a.."###"..b
			--print( word, i )
		end
	end

	word = trim( word:upper() ):gsub( "_", " " ):gsub( "^ИП", "" )
	word = trim( word )
	if word:find( "^-" ) then
		word = word:sub( 2 )
	end
	if word:find( "," ) then
		local pos = word:find( "," )
		word = word:sub( 1, pos - 1 )
		--print(word,"!!!!!!!!!!!!!!!!");
	end



	return word
end

function compareItemWords( word1, word2 )
	word1 = compareWordPrepare( word1 )
	word2 = compareWordPrepare( word2 )
	--print( word1, word2, word2:gsub( "%(%+%)", "" ), word2:gsub( "(%d%/%d)", ""  ), word2:gsub( "( %d)", "" ) )
	if ( word1 == word2 )
	or ( word1:gsub( "%(%+%)", "" ) == word2:gsub( "%(%+%)", "" )  )
	or ( word1:gsub( "(%d%/%d)", ""  ) == word2:gsub( "(%d%/%d)", ""  ) )
	or ( word1:gsub( "( %d)", "" ) == word2:gsub( "( %d)", "" ) )
	then
		return true
	else
		return false
	end
end

local wr = get_string_massive( writer )
local sr = get_string_massive( strings )

local wrt = get_string_massive_tabs( wr )
local srt = get_string_massive_tabs( sr )

for i = 1, #wr do
	for j = i + 1, #wr do
		if wr[ i ] == wr[ j ] then
			print( wr[ i ], "!!!!!ПОВТОР в списке предметов писателя" )
		end
	end
end

for i = 1, #srt do
	if srt[ i ][ 3 ] then
		local searth = trim( srt[ i ][ 3 ]:gsub( "^применяем ", "" ) )

		if srt[ i ][ 3 ]:find( "Ключ-череп" ) then
			print( "!!! Ключ-череп" )
		end



		local finded_i = {}
		for i = 1, #srt do
			if srt[ i ][ 3 ] then
				local word_finded = srt[ i ][ 3 ]:find( searth )
				if not word_finded then
					if compareItemWords( srt[ i ][ 3 ]:gsub( "^применяем", "" ), searth ) then
						word_finded = true
					end
				end
				if srt[ i][ 3 ]:find( "^применяем " ) and word_finded then
					table.insert( finded_i, i )
				end
			end
		end

			local finded_j = {}
			for j = 1, #wrt do
				if wrt[ j ][ 2 ] then
					--wrt[ j ][ 2 ] = wrt[ j ][ 2 ]:gsub( "_", " " )
					--local word_finded = wrt[ j ][ 2 ]:find( searth )
					local word_finded = wrt[ j ][ 2 ]:find( searth )
					if not word_finded then
						if compareItemWords( wrt[ j ][ 2 ]:gsub( "^need", "" ), searth ) then
							word_finded = true
						end
					end


					if ( wrt[ j ][ 2 ]:find( "^нуж" ) or wrt[ j ][ 2 ]:find( "^need" ) ) and word_finded then
						table.insert( finded_j, j )
					end
				end
			end
			if #finded_j == 0 or #finded_i == 0 then
				srt[ i ][ 3 ] = srt[ i ][ 3 ].." ||NOT FINDED||";
			elseif #finded_j == 1 and #finded_i == 1 then
				if wrt[ finded_j[ 1 ] ][ 4 ] == nil then
					srt[ i ][ 2 ] = srt[ i ][ 2 ]
					srt[ i ][ 3 ] = srt[ i ][ 3 ].." ||NULL||";
				else
					srt[ i ][ 2 ] = wrt[ finded_j[ 1 ] ][ 4 ]
					srt[ i ][ 3 ] = srt[ i ][ 3 ].." ||OK||";
				end
				wrt[ finded_j[ 1 ] ][ 5 ] =  wrt[ finded_j[ 1 ]][ 5 ] or ""
				wrt[ finded_j[ 1 ] ][ 6 ] =  wrt[ finded_j[ 1 ] ][ 6 ] and ( wrt[ finded_j[ 1 ] ][ 6 ].." ("..srt[ i ][ 1 ]..")" ) or srt[ i ][ 1 ]
			else
				srt[ i ][ 3 ] = srt[ i ][ 3 ].." ||FINDED COUNT *"..math.max( #finded_j, #finded_i ).."*||";
			end

	end
end

print( "STRINGS" )
show_string_massive_tabs( srt )
print( "WRITERS" )
show_string_massive_tabs( wrt )
